install.packages("devtools")
library(devtools)
browseVignettes("geospaar")
file.exists("~/.ssh/id_rsa.pub")
browseVignettes("geospaar")
library(zambiags)
library(geospaar)
ss01 <- raster("data/season_planting_date_30perc/season_01.tif")
ss01
ss01 <- raster("data/season_planting_date_30perc/season_01.tif")
ss01 <- raster("data/season_planting_date_30perc/season_01.tif")
ss02 <- raster("data/season_planting_date_30perc/season_02.tif")
ss03 <- raster("data/season_planting_date_30perc/season_03.tif")
ss04 <- raster("data/season_planting_date_30perc/season_04.tif")
ss05 <- raster("data/season_planting_date_30perc/season_05.tif")
ss06 <- raster("data/season_planting_date_30perc/season_06.tif")
ss07 <- raster("data/season_planting_date_30perc/season_07.tif")
ss08 <- raster("data/season_planting_date_30perc/season_08.tif")
ss09 <- raster("data/season_planting_date_30perc/season_09.tif")
ss10 <- raster("data/season_planting_date_30perc/season_10.tif")
ss11 <- raster("data/season_planting_date_30perc/season_11.tif")
ss12 <- raster("data/season_planting_date_30perc/season_12.tif")
ss13 <- raster("data/season_planting_date_30perc/season_13.tif")
ss14 <- raster("data/season_planting_date_30perc/season_14.tif")
ss15 <- raster("data/season_planting_date_30perc/season_15.tif")
ss16 <- raster("data/season_planting_date_30perc/season_16.tif")
ss17 <- raster("data/season_planting_date_30perc/season_17.tif")
ss18 <- raster("data/season_planting_date_30perc/season_18.tif")
#create season start stack
l <- list(ss01, ss02, ss03, ss04, ss05, ss06, ss07, ss08, ss09, ss10, ss11, ss12, ss13, ss14, ss15, ss16, ss17, ss18)
season_start_stack <- stack(l)
plot_noaxes(season_start_stack)
#library(zambiags)
library(geospaar)
ss01 <- raster("data/season_planting_date_30perc/season_01.tif")
ss02 <- raster("data/season_planting_date_30perc/season_02.tif")
ss03 <- raster("data/season_planting_date_30perc/season_03.tif")
ss04 <- raster("data/season_planting_date_30perc/season_04.tif")
ss05 <- raster("data/season_planting_date_30perc/season_05.tif")
ss06 <- raster("data/season_planting_date_30perc/season_06.tif")
ss07 <- raster("data/season_planting_date_30perc/season_07.tif")
ss08 <- raster("data/season_planting_date_30perc/season_08.tif")
ss09 <- raster("data/season_planting_date_30perc/season_09.tif")
ss10 <- raster("data/season_planting_date_30perc/season_10.tif")
ss11 <- raster("data/season_planting_date_30perc/season_11.tif")
ss12 <- raster("data/season_planting_date_30perc/season_12.tif")
ss13 <- raster("data/season_planting_date_30perc/season_13.tif")
ss14 <- raster("data/season_planting_date_30perc/season_14.tif")
ss15 <- raster("data/season_planting_date_30perc/season_15.tif")
ss16 <- raster("data/season_planting_date_30perc/season_16.tif")
ss17 <- raster("data/season_planting_date_30perc/season_17.tif")
ss18 <- raster("data/season_planting_date_30perc/season_18.tif")
#create season start stack
l <- list(ss01, ss02, ss03, ss04, ss05, ss06, ss07, ss08, ss09, ss10, ss11, ss12, ss13, ss14, ss15, ss16, ss17, ss18)
season_start_stack <- stack(l)
plot_noaxes(season_start_stack)
se01
ss01
ss01-ss02
ss18
plot_noaxes(ss18)
#Season End Tif
se01 <- raster("data/season_end_30perc/season_01.tif")
plot_noaxes(se01)
se01
seasonStart_brick <- brick(l)
"hi"
ss01 <- raster("external/data/season_planting_date_30perc/season_01.tif")
#library(zambiags)
library(geospaar)
ss01 <- raster("external/data/season_planting_date_30perc/season_01.tif")
ss01 <- raster("extdata/season_planting_date_30perc/season_01.tif")
lapply("extdata/season_planting_date_30perc", function = raster)
?lapply
lapply("extdata/season_planting_date_30perc", fun = raster)
lapply("extdata/season_planting_date_30perc", FUN = raster)
ss_file <- (read.csv("extdata/season_planting_date_30perc"))
ss_file <- (read.csv("extdata/season_planting_date_30perc/season_01.tif"))
ss_file
lapply("extdata/season_planting_date_30perc", FUN = raster, use.names = TRUE)
lapply("extdata/season_planting_date_30perc/season_01.tif", FUN = raster, use.names = TRUE)
list.files("extdata/season_planting_date_30perc")
list.files("extdata/season_planting_date_30perc")
lapply(list.files("extdata/season_planting_date_30perc"), FUN = raster, use.names = TRUE)
lapply(x = list.files("extdata/season_planting_date_30perc"), FUN = raster, use.names = TRUE)
lapply(X = list.files("extdata/season_planting_date_30perc"), FUN = raster, use.names = TRUE)
list.files("extdata/season_planting_date_30perc")
ss_filelist <- list.files("extdata/season_planting_date_30perc")
lapply(ss_filelist, FUN = raster, use.names = TRUE)
ss_filelist <- list(list.files("extdata/season_planting_date_30perc"))
lapply(ss_filelist, FUN = raster, use.names = TRUE)
lapply(c(ss_filelist), FUN = raster, use.names = TRUE)
lapply(X = c(ss_filelist), FUN = raster, use.names = TRUE)
ss_filelist
file.path(list.files("extdata/season_planting_date_30perc"))
list(file.path(list.files("extdata/season_planting_date_30perc")))
file.path("extdata/season_planting_date_30perc")
file.path("extdata/season_planting_date_30perc") + "/" + list.files("extdata/season_planting_date_30perc")
c(file.path("extdata/season_planting_date_30perc") + "/" + list.files("extdata/season_planting_date_30perc"))
c(file.path("extdata/season_planting_date_30perc"), "/", list.files("extdata/season_planting_date_30perc"))
file.path(c(list.files("extdata/season_planting_date_30perc")))
lapply(X = "season_01.tif"), FUN = raster, use.names = TRUE)
lapply("season_01.tif", FUN = raster, use.names = TRUE)
ss_filelist <- list(list.files("extdata/season_planting_date_30perc"))
ss_filelist
?list.files
(list.files("extdata/season_planting_date_30perc", full.anmes = TRUE)
list.files("extdata/season_planting_date_30perc", full.names = TRUE)
ss_filelist <- list.files("extdata/season_planting_date_30perc", full.names = TRUE)
lapply(ss_filelist, FUN = raster, use.names = TRUE)
ss_rasterfiles <- lapply(ss_filelist, FUN = raster, use.names = TRUE)
ss_rasterfiles
#Season End Tif
ss_filelist <- list.files("extdata/season_end_30perc", full.names = TRUE)
ss_filelist
ss_filelist <- list.files("extdata/season_planting_date_30perc", full.names = TRUE)
#Season End Tif
se_filelist <- list.files("extdata/season_end_30perc", full.names = TRUE)
se_rasterfiles <- lapply(ss_filelist, FUN = raster, use.names = TRUE)
se_rasterfiles
se_rasterfiles <- lapply(se_filelist, FUN = raster, use.names = TRUE)
se_rasterfiles
season_end_stack <- stack(se_rasterfiles)
season_start_stack <- stack(ss_rasterfiles)
#library(zambiags)
library(geospaar)
#import season srtart files
ss_filelist <- list.files("extdata/season_planting_date_30perc", full.names = TRUE)
ss_rasterfiles <- lapply(ss_filelist, FUN = raster, use.names = TRUE)
season_start_stack <- stack(ss_rasterfiles)
season_start_stack
ss_rasterfiles
ss_rasterfiles
ss_rasterfiles[1]
ss_rasterfiles %>% mean()
plot_noaxes(ss_rasterfiles[1])
ss_rasterfiles
plot_noaxes(season_start_stack[1])
season_start_stack[1]
season_start_stack[[11]
season_start_stack[[1}]
plot_noaxes(season_start_stack[1])
```
season_start_stack[[1]]
plot_noaxes(season_start_stack[[1]])
#import season end files
se_filelist <- list.files("extdata/season_end_30perc", full.names = TRUE)
se_rasterfiles <- lapply(se_filelist, FUN = raster, use.names = TRUE)
season_end_stack <- stack(se_rasterfiles)
plot_noaxes(season_end_stack[[1]])
season_start_stack[[1, 2]]
season_start_stack[[1:2]]
plot_noaxes(season_start_stack[[1:2]])
plot_noaxes(season_end_stack[[1:2]])
#import season srtart files
ss_filelist <- list.files("external/data/season_planting_date_30perc", full.names = TRUE)
select(season_start_stack[[1]])
raster::select(season_start_stack[[1]])
season_start_stack[[1]]
raster(season_start_stack[[1]])
ss1 <- raster(season_start_stack[[1]])
ss1
plot(ss1)
plot_noaxes(ss1)
ss1 <- raster(season_start_stack[[1]], getValues(season_start_stack[[1]]))
ss1 <- raster(getValues(season_start_stack[[1]]))
ss1 <- raster(., getValues(season_start_stack[[1]]))
season_start_stack[[1]]
season_start_stack[[1]] %>% raster::select(x > 365)
season_start_stack[[1]] %>% raster::select(cell > 365)
season_start_stack[[1]] %>% raster::select(>365)
season_start_stack[[1]] %>% raster::select(1)
?raster::select
season_start_stack[[1]] %>% raster::select(., draw > 365)
season_start_stack[[1]] %>% raster::select(., draw = 365)
ss1 <- extent(season_start_stack[[1]])
ss1
ss1 <- raster(extent(season_start_stack[[1]]))
ss1
plot(ss1)
ss1 <- raster(season_start_stack[[1]])
season_start_stack %>% calc(., mean)
season_start_stack[[1]] %>% calc(., mean)
season_start_stack[[1]] %>%
?calc
season_start_stack[[1]] %>%
?raster::calc
calc(season_start_stack, mean())
calc(season_start_stack, )
calc(season_start_stack, mean)
calc(season_start_stack[[1]], mean)
sapply(season_start_stack, mean)
ss_rasterfiles[[1]]
ss_rasterfiles[[1]] %>% mean
sapply(ss_rasterfiles, mean)
ss_rasterfiles %>% calc(., mean)
#library(zambiags)
library(geospaar)
#library(zambiags)
library(dplyr)
library(geospaar)
ss_rasterfiles %>% calc(., mean)
values(ss1) <- season_start_stack[[1]]
values(ss1) <- 1
plot(ss1)
ss_mean <- raster(extent(season_start_stack[[1]]))
ss_mean
season_start_stack[[1]]
ss_mean <- raster(extent(season_start_stack[[1]], res = season_start_stack[[1]]))
ss_mean <- raster(extent(season_start_stack[[1]]), res = season_start_stack[[1]])
ss_mean <- raster(extent(season_start_stack[[1]]))
res(ss_mean) <- season_start_stack[[1]]
season_start_stack[[1]]
ss_mean <- raster(season_start_stack[[1]])
ss_mean
ss_filelist
ssmean <- raster::
ss_values <- raster::getValues(season_start_stack)
season_start_stack
raster::cellStats(season_start_stack)
?raster::cellStats
ssmean <- raster::cellStats(season_start_stack, mean)
ssmean <- raster::cellStats(season_start_stack[[1]], mean)
#load mask
data("crop_mask")
crop_mask
plot_noaxes(crop_mask)
season_start_stack %>% mask(., crop_mask)
ss_brick <- brick(ss_rasterfiles)
season_start_stack <- stack(ss_rasterfiles)
ss_brick <- brick(ss_rasterfiles)
#import season srtart files
ss_filelist <- list.files("external/data/season_planting_date_30perc", full.names = TRUE)
ss_rasterfiles <- lapply(ss_filelist, FUN = raster, use.names = TRUE)
ss_brick <- brick(ss_rasterfiles)
plot_noaxes(season_start_stack[[1]])
#library(zambiags)
library(dplyr)
library(geospaar)
#import season srtart files
ss_filelist <- list.files("external/data/season_planting_date_30perc", full.names = TRUE)
ss_rasterfiles <- lapply(ss_filelist, FUN = raster, use.names = TRUE)
season_start_stack <- stack(ss_rasterfiles)
ss_brick <- brick(ss_rasterfiles)
#import season end files
se_filelist <- list.files("external/data/season_end_30perc", full.names = TRUE)
se_rasterfiles <- lapply(se_filelist, FUN = raster, use.names = TRUE)
season_end_stack <- stack(se_rasterfiles)
plot_noaxes(season_start_stack[[1]])
plot_noaxes(season_end_stack[[1]])
#load mask
data("crop_mask")
crop_mask
plot_noaxes(crop_mask)
#planting date analysis
maskr
library("raster")
maskr <- raster("external/data/cropland/CropZmb1V1_2015_16_fullagree.tif")
plant <- dir("external/data/phenology/season_planting_date_30perc/", full.names = TRUE)
harv <- dir("external/data/phenology/season_end_30perc/", full.names = TRUE)
load("~/R/zambiags/data/crop_mask.rda")
load("~/R/zambiags/data/harv_masked.rda")
load("~/R/zambiags/data/plant_masked.rda")
#planting date analysis
data("crop_mask")
crop_mask
harv_masked
plant_masked
plot_noaxes(harv_masked[[1]])
plot_noaxes(harv_masked[1])
plot_noaxes(crop_mask)
plot_noaxes(harv_masked)
source('~/.active-rstudio-document', echo=TRUE)
harv_masked
harv_masked %>% cellStats(., mean)
crop_mask
harv_masked
#planting date analysis
crop_mask
load("~/R/zambiags/data/crop_mask.rda")
#planting date analysis
crop_mask
load("~/R/zambiags/data/crop_mask.rda")
#planting date analysis
crop_mask
library("raster")
library("raster")
crop_mask
data(crop_mask)
crop_mask
harv_masked
data("harv_masked")
harv_masked
plant <- dir("external/data/phenology/season_planting_date_30perc/", full.names = TRUE)
harv <- dir("external/data/phenology/season_end_30perc/", full.names = TRUE)
harv
harv
harv <- dir("external/data/phenology/season_end_30perc/", full.names = TRUE)
harv
plant <- dir("external/data/phenology/season_planting_date_30perc/", full.names = TRUE)
plant
harv <- dir("external/data/phenology/season_end_30perc/", full.names = TRUE)
harv
plant_ras <- lapply(plant, raster)
plant_brick <- brick(plant_ras)
plant_ras
crop_mask %>% cellStats(., mean)
library(dplyr)
crop_mask %>% cellStats(., mean)
plot_noaxes(crop_mask)
#planting date analysis
library(geospaar)
plot_noaxes(crop_mask)
crop_mask %>% cellStats(., mean)
crop_mask %>% cellStats(., mean) %>% plot_noaxes(.)
?cellStats
crop_mask %>% raster::cellStats(., mean)
crop_mask %>% raster::cellStats(., mean) %>% plot()
?cellStats
data("harv_masked")
harv_masked
plant_masked
load("~/R/zambiags/data/harv_masked.rda")
harv_masked
plot_noaxes(harv_masked)
plant_ras
harv_masked
load("~/R/zambiags/data/harv_masked.rda")
harv_masked
plot_noaxes(harv_masked)
#planting date analysis
library(geospaar)
plot_noaxes(harv_masked)
plant_masked
data("harv_masked")
load("~/R/zambiags/data/harv_masked.Rdata")
harv_masked
plot_noaxes(harv_masked)
load("~/R/zambiags/data/harv_masked.Rdata")
harv_masked
plot_noaxes(harv_masked)
#planting date analysis
library(geospaar)
library(dplyr)
crop_mask
data(crop_mask)
crop_mask
data(harv_masked)
harv_masked
load("~/R/zambiags/data/harv_masked.Rdata")
harv_masked
plot_noaxes(harv_masked)
data("harv_masked")
plant_masked
load("~/R/zambiags/data/plant_masked.Rdata")
plant_masked
plot_noaxes(crop_mask)
crop_mask %>% raster::cellStats(., mean)
?cellStats
load("~/R/zambiags/data/harv_masked.Rdata")
crop_mask %>% raster::calc(., mean)
plant_ras
plant <- dir("external/data/phenology/season_planting_date_30perc/", full.names = TRUE)
plant_ras <- lapply(plant, raster)
plant_ras
plant_ras %>% raster::calc( mean)
plant_ras %>% raster::calc(., mean)
plant_ras %>% calc(., mean)
?calc
#planting date analysis
library(geospaar)
raster::calc(x, mean)
raster::calc(crop_mask, min)
plant_mean <- raster("plant_mean.tif")
plant_mean
plot_noaxes(plant_mean)
?raster::extract
y <- plant_mean > 365
y
plot_noaxes(y)
y <- plant_mean > 366
plot_noaxes(y)
y <- plant_mean > 367
plot_noaxes(y)
plant_mean
y <- plant_mean < 5
plot_noaxes(y)
y <- plant_mean > 365
plot_noaxes(y)
y <- (plant_mean > 365) * -365
plot_noaxes(y)
y
plot_noaxes(y)
plot_noaxes(y)
plant_mean_corrected <- plant_mean + y
plot_noaxes(plant_mean_corrected)
plant_mean_corrected
plant_mean
negative_ras <- (plant_mean > 365) * -365
plant_mean_corrected <- plant_mean + negative_ras
plot_noaxes(plant_mean_corrected)
plant_mean
plant_mean_corrected
browseVignettes("geospaar")
districts <- system.file("extdata/districts.shp", package = "geospaar") %>%
st_read
aggregate(plant_mean_corrected, districts)
plplot_noaxes(districts)
plot_noaxes(districts)
districts <- districts %>% mutate(ID = 1:nrow(.))
distsr <- districts %>% rasterize(x = ., y = zamr, field = "ID") %>% print()
plot_noaxes(distrs)
plot_noaxes(distsr)
plant_mean
zamr <- raster(x = extent(districts), crs = crs(districts), res = 0.1)
values(zamr) <- 1:ncell(zamr)
districts <- districts %>% mutate(ID = 1:nrow(.))
distsr <- districts %>% rasterize(x = ., y = plant_mean_corrected, field = "ID") %>% print()
distsr <- districts %>% rasterize(x = ., y = zamr, field = "ID") %>% print()
plot_noaxes(distsr)
districts <- districts %>% mutate(ID = 1:nrow(.))
distsr <- districts %>% rasterize(x = ., y = zamr, field = "ID") %>% print()
plot_noaxes(distsr)
zonemu <- zonal(x = plant_mean_corrected, z = distsr, fun = "mean")
distsr_rs <- resample(x = distsr, y = plant_mean_corrected, method = "ngb")
zonemu <- zonal(x = plant_mean_corrected, z = distsr_rs, fun = "mean")
plot_noaxes(zonemu)
zonemu
distr_rfmu <- zonemu %>% data.frame %>% select(1:2) %>%
subs(x = distsr_rs, y = ., by = "zone")
library(geospaar)
zonemu
zonemu %>% data.frame
zonemu %>% data.frame %>% select(1:2)
distsr_rs
distr_rfmu <- zonemu %>% data.frame %>% select(1:2) %>%
subs(x = distsr_rs, y = ., by = "zone")
plot_noaxes(distr_rfmu)
library(geospaar)
plant_mean <- raster("plant_mean.tif")
